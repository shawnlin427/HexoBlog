<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wonderful-sea-04900b000.6.azurestaticapps.net","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Shawn Lin&#39;s Blog">
<meta property="og:url" content="https://wonderful-sea-04900b000.6.azurestaticapps.net/page/4/index.html">
<meta property="og:site_name" content="Shawn Lin&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Xiao Lin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Shawn Lin's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Shawn Lin's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/09/09/wp-global-styles-twentytwentytwo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/09/wp-global-styles-twentytwentytwo/" class="post-title-link" itemprop="url">Custom Styles</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-09 13:05:28" itemprop="dateCreated datePublished" datetime="2022-09-09T13:05:28+08:00">2022-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uncategorized/" itemprop="url" rel="index"><span itemprop="name">uncategorized</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>{“version”: 2, “isGlobalStylesUserThemeJSON”: true }</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/09/09/dockerfile%E6%8D%A2apt%E6%BA%90%E5%92%8Cpip%E6%BA%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/09/dockerfile%E6%8D%A2apt%E6%BA%90%E5%92%8Cpip%E6%BA%90/" class="post-title-link" itemprop="url">Dockerfile换apt源和pip源</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-09 12:58:10" itemprop="dateCreated datePublished" datetime="2022-09-09T12:58:10+08:00">2022-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bolgs/" itemprop="url" rel="index"><span itemprop="name">bolgs</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bolgs/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Dockerfile中一般都使用默认的源，出于总所周知的原因，默认源总有各种各样的问题，因此最好是换成国内的镜像源。下面介绍怎么在Dockerfile中换apt源。</p>
<p>首先，在Dockerfile所处的文件夹下建立一个source.list，里面填写国内镜像源，清华镜像源在此：</p>
<p># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释<br>deb <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic main restricted universe multiverse</p>
<h1 id="deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-main-restricted-universe-multiverse"><a href="#deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-main-restricted-universe-multiverse" class="headerlink" title="deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse"></a>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic main restricted universe multiverse</h1><p>deb <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse</p>
<h1 id="deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-updates-main-restricted-universe-multiverse"><a href="#deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-updates-main-restricted-universe-multiverse" class="headerlink" title="deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse"></a>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse</h1><p>deb <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse</p>
<h1 id="deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-backports-main-restricted-universe-multiverse"><a href="#deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-backports-main-restricted-universe-multiverse" class="headerlink" title="deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse"></a>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse</h1><p>deb <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse</p>
<h1 id="deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-security-main-restricted-universe-multiverse"><a href="#deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-security-main-restricted-universe-multiverse" class="headerlink" title="deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse"></a>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse</h1><h1 id="预发布软件源，不建议启用"><a href="#预发布软件源，不建议启用" class="headerlink" title="预发布软件源，不建议启用"></a>预发布软件源，不建议启用</h1><h1 id="deb-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-proposed-main-restricted-universe-multiverse"><a href="#deb-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-proposed-main-restricted-universe-multiverse" class="headerlink" title="deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse"></a>deb <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse</h1><h1 id="deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-proposed-main-restricted-universe-multiverse"><a href="#deb-src-https-mirrors-tuna-tsinghua-edu-cn-ubuntu-bionic-proposed-main-restricted-universe-multiverse" class="headerlink" title="deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse"></a>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse</h1><p>然后在dockerfile中加入：</p>
<p>ADD docker&#x2F;sources.list &#x2F;etc&#x2F;apt</p>
<p>source.list的路径是在运行docker build的目录下的相对路径。这样就完成了对apt的换源。pip更简单，在dockerfile中直接加入：</p>
<p># Upgrade pip<br>RUN pip install –upgrade pip<br>RUN pip config set global.index-url <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p>
<p>Docker能给开发省下很多时间，国内开发者用上docker估计能比不用快个几倍把。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/05/21/%E4%BD%BF%E7%94%A8%E8%99%9A%E5%B9%BB5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%8B%9F%E5%90%8A%E8%A3%85%E5%9C%BA%E6%99%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/21/%E4%BD%BF%E7%94%A8%E8%99%9A%E5%B9%BB5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%8B%9F%E5%90%8A%E8%A3%85%E5%9C%BA%E6%99%AF/" class="post-title-link" itemprop="url">使用虚幻5制作一个模拟吊装场景</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-21 00:34:53" itemprop="dateCreated datePublished" datetime="2022-05-21T00:34:53+08:00">2022-05-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/%E8%99%9A%E5%B9%BB/" itemprop="url" rel="index"><span itemprop="name">虚幻</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><h3 id="吊车"><a href="#吊车" class="headerlink" title="吊车"></a>吊车</h3><p>Pawn，从FBX导入的时候检查方向。缩放存在问题，import to level后总是0.1，但是在BP里改为1之后大小正常可以使用。不带物理仿真。</p>
<h4 id="视角切换"><a href="#视角切换" class="headerlink" title="视角切换"></a>视角切换</h4><p>放置两个摄像机，一个在驾驶舱一个在起重机操作仓，互相切换。</p>
<h4 id="驾驶和起重操作"><a href="#驾驶和起重操作" class="headerlink" title="驾驶和起重操作"></a>驾驶和起重操作</h4><p>确保每个部件的Origin是在转轴上，然后通过add offset来旋转部件。</p>
<h4 id="吊起"><a href="#吊起" class="headerlink" title="吊起"></a>吊起</h4><p>使用一个physical handle，配合lineScan，实现附着。</p>
<h3 id="盒子"><a href="#盒子" class="headerlink" title="盒子"></a>盒子</h3><p>Actor，带碰撞，带物理仿真。</p>
<h3 id="移动人员"><a href="#移动人员" class="headerlink" title="移动人员"></a>移动人员</h3><p>AI，使用Manniequin的模型</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><h3 id="小地图"><a href="#小地图" class="headerlink" title="小地图"></a>小地图</h3><p>Render Target，加User widget</p>
<h3 id="切换模式"><a href="#切换模式" class="headerlink" title="切换模式"></a>切换模式</h3><p>active不同的摄像头，实现切换</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>使用虚幻，我花了大概三天时间从小白，实现了这个Demo。不说多成熟，至少证明了用虚幻能快速地实现一些东西，这对于非专业人士来说极其重要。虚幻的技术门槛之低是它应用于其他行业的优势之一。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/05/10/%E4%BD%BF%E7%94%A8google-map%E7%94%9F%E6%88%90%E4%BD%A0%E7%9A%84%E6%88%B7%E5%A4%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/10/%E4%BD%BF%E7%94%A8google-map%E7%94%9F%E6%88%90%E4%BD%A0%E7%9A%84%E6%88%B7%E5%A4%96%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">使用Google Map生成你的户外机器人测试环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-10 18:32:15" itemprop="dateCreated datePublished" datetime="2022-05-10T18:32:15+08:00">2022-05-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E8%B4%B4/" itemprop="url" rel="index"><span itemprop="name">技术贴</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>此方法不适用于中国大陆地区的地图数据。</p>
<h2 id="所需软件"><a href="#所需软件" class="headerlink" title="所需软件"></a>所需软件</h2><ol>
<li>Blender 2.93</li>
<li>RenderDoc 1.13</li>
<li><a target="_blank" rel="noopener" href="https://github.com/eliemichel/MapsModelsImporter/releases/tag/v0.4.1-rc1">Maps Models Importer v0.4.1</a></li>
<li>Chrome浏览器</li>
</ol>
<p>请严格按照以上版本安装软件。</p>
<h2 id="1-使用RenderDoc注入Chrome浏览器"><a href="#1-使用RenderDoc注入Chrome浏览器" class="headerlink" title="1 使用RenderDoc注入Chrome浏览器"></a>1 使用RenderDoc注入Chrome浏览器</h2><p>打开RenderDoc，在File中找到Inject to Process并打开。</p>
<p>打开一个cmd命令行窗口，输入：</p>
<p>set RENDERDOC_HOOK_EGL&#x3D;0<br>“C:\Program Files\Google\Chrome\Application\chrome.exe” –disable-gpu-sandbox –gpu-startup-dialog</p>
<p>如果是32位系统，在Program Files后面加上(x86)。输入后，会打开一个Chrome窗口，还有一个小窗口：</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87.png"></a></p>
<p>在RenderDoc中点击Refresh，找到对应的pid，选中后点击inject。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-1.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-1-1024x705.png"></a></p>
<p>注入后点击确定关闭小窗口，此时Google Chrome浏览器左上方会出现状态信息，则说明注入完成。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-2.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-2-1024x766.png"></a></p>
<h2 id="选择感兴趣的地点"><a href="#选择感兴趣的地点" class="headerlink" title="选择感兴趣的地点"></a>选择感兴趣的地点</h2><p>谷歌地图：<a target="_blank" rel="noopener" href="https://www.google.se/maps">https://www.google.se/maps</a></p>
<p>以香港维多利亚港为例。选中地球视图和卫星图像，这会使得地图能显示3d数据。</p>
<p>在RenderDoc中，修改Capture after delay为1秒，然后点击Capture Frame。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-3.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-3-1024x705.png"></a></p>
<p>**注意：点击后，快速切换到google map窗口，拖动窗口使得窗口进行渲染，直到捕捉结束。**可以多捕捉几次，直到捕捉内容的大小相对稳定。选择大小相对稳定的场景，保存至本地。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-5.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-5-1024x574.png"></a></p>
<h2 id="导入Blender"><a href="#导入Blender" class="headerlink" title="导入Blender"></a>导入Blender</h2><p>在Blender中安装插件，然后选择导入rdc。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-6.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-6-1024x554.png"></a></p>
<p>耐心等待直到导入完成。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-7.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-7-1024x614.png"></a></p>
<p>然后就可以对模型进行修改了。导出的模型是必定有厚度的，不用担心机器人走着走着掉了下去。</p>
<p>对你有用的话，就点个赞吧~</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/05/06/ros2-launch%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/06/ros2-launch%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">ROS2 Launch的一些基本操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-06 11:32:04" itemprop="dateCreated datePublished" datetime="2022-05-06T11:32:04+08:00">2022-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/" itemprop="url" rel="index"><span itemprop="name">robotics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="执行操作的各种方式"><a href="#执行操作的各种方式" class="headerlink" title="执行操作的各种方式"></a>执行操作的各种方式</h2><p>在launch file中，一般操作仅限于以下几种：</p>
<ol>
<li>运行一个Ros Node，等同于ros2 run</li>
<li>执行一条命令，等同于在终端中输入一行命令</li>
<li>运行其他的launch文件，等同于ros2 launch</li>
</ol>
<h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p> from launch_ros.actions import Nodefrom launch_ros.actions import Node<br>   node_robot_state_publisher &#x3D; Node(<br>        package&#x3D;”robot_state_publisher”,<br>        executable&#x3D;”robot_state_publisher”,<br>        output&#x3D;”screen”,<br>        parameters&#x3D;[robot_description],<br>    )</p>
<p>最基本的执行单元，需要提供package、executable，并制定output和parameters（有时候是arguments）。output属性有log和screen两种，screen是输出到屏幕，log是输出到一个log file中。</p>
<p>更多信息参照<a target="_blank" rel="noopener" href="http://wiki.ros.org/roslaunch/XML/node%EF%BC%88%E6%AD%A4%E9%A1%B5%E9%9D%A2%E6%98%AFROS1%E7%89%88%E6%9C%AC%E7%9A%84%EF%BC%8C%E4%B8%8D%E5%8F%AF%E7%9B%B4%E6%8E%A5%E5%A4%8D%E7%94%A8%E5%88%B0ROS2%E4%B8%AD%EF%BC%89">http://wiki.ros.org/roslaunch/XML/node（此页面是ROS1版本的，不可直接复用到ROS2中）</a></p>
<h3 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h3><p>from launch.substitutions import Command</p>
<pre><code>robot\_description\_content = Command(
    \[
        PathJoinSubstitution(\[FindExecutable(name=&quot;xacro&quot;)\]),
        &quot; &quot;,
        PathJoinSubstitution(
            \[FindPackageShare(&quot;diffbot\_description&quot;), &quot;urdf&quot;, &quot;diffbot\_system.urdf.xacro&quot;\]
        ),
    \]
)
</code></pre>
<p>相当于执行一条命令，并将命令的输出赋予一个对象。经常会和PathJoinSubstitution配合使用，后者是返回一个路径的substitution对象（下一节讲）。需要注意的是，空格也是需要写在参数列表里的。</p>
<h3 id="Launch"><a href="#Launch" class="headerlink" title="Launch"></a>Launch</h3><p>from launch.actions import IncludeLaunchDescription<br>from launch.launch_description_sources import PythonLaunchDescriptionSource</p>
<pre><code>pkg\_gazebo\_ros = FindPackageShare(package=&#39;gazebo\_ros&#39;).find(&#39;gazebo\_ros&#39;)
gazebo\_launch = IncludeLaunchDescription(
    PythonLaunchDescriptionSource(os.path.join(pkg\_gazebo\_ros,&quot;launch&quot;,&quot;gazebo.launch.py&quot;))
)
</code></pre>
<p>相当于启动另一个Launch文件，一般用于启动模拟器。需要指定launch文件的路径，使用IncludeLaunchDescription和PythonLaunchDescriptionSource嵌入launch文件。</p>
<h2 id="表示路径的各种方式"><a href="#表示路径的各种方式" class="headerlink" title="表示路径的各种方式"></a>表示路径的各种方式</h2><h3 id="Substitution"><a href="#Substitution" class="headerlink" title="Substitution"></a>Substitution</h3><p>SuSubstitutions are variables that are only evaluated during execution of the launch description and can be used to acquire specific information like a launch configuration, an environment variable, or to evaluate an arbitrary Python expression.（官方解释）简单地说，Substitution是一类对象，可以参数化地进行调用。</p>
<h4 id="Executable"><a href="#Executable" class="headerlink" title="Executable"></a>Executable</h4><p>from launch.substitutions import FindExecutable<br>FindExecutable(name&#x3D;”xacro”)</p>
<p>这会搜索到一个可执行程序的路径，以launch.substitutions.find_executable.FindExecutable对象的格式返回（不是路径字符串）。要使用它，需要配合PathJoinSubstitution函数使用，后者会将其转化为PathJoinSubstitution对象，这样可以被作为路径的一部分被其他Substitution函数使用，如下：</p>
<pre><code>robot\_description\_content = Command(
    \[
        PathJoinSubstitution(\[FindExecutable(name=&quot;xacro&quot;)\]), 
        &#39; &#39;,
        PathJoinSubstitution(\[FindPackageShare(&#39;sany&#39;), &#39;urdf&#39;, &#39;sany.xacro&#39;\]),
    \]
)
</code></pre>
<h4 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h4><p>from launch_ros.substitutions import FindPackageShare<br>pkg_gazebo_ros &#x3D; FindPackageShare(package&#x3D;’gazebo_ros’)</p>
<p>这会在当前环境下尝试搜索到指定的package的share路径，以FindPackageShare的方式返回。同理，也需要配合PathJoinSubstitution函数使用，例如：</p>
<p>IncludeLaunchDescription(<br>            PythonLaunchDescriptionSource([<br>                PathJoinSubstitution([<br>                    FindPackageShare(‘launch_tutorial’),<br>                    ‘launch’,<br>                    ‘example_substitutions.launch.py’<br>                ])<br>            ]),</p>
<p>不仅如此，还可以使用该对象的find方法，来直接具体到这个package的share路径下的某个文件夹，此时返回的是字符串路径，可以使用os.join方式合成完整路径，如下：</p>
<p>pkg_gazebo_ros &#x3D; FindPackageShare(package&#x3D;’gazebo_ros’).find(‘gazebo_ros’)<br>  gazebo_launch &#x3D; IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(os.path.join(pkg_gazebo_ros,”launch”,”gazebo.launch.py”))<br>    )</p>
<h4 id="Launch-1"><a href="#Launch-1" class="headerlink" title="Launch"></a>Launch</h4><p>ThisLaunchFileDir是一个快速地返回指向当前Package的Launch文件夹的Substitution对象的方式，它一般用于参数化的LaunchFile，此时会有一个base_launch，其他Launch通过引用这个launchFile并修改参数的方式达到不同的launch效果。</p>
<h2 id="添加参数的各种方式"><a href="#添加参数的各种方式" class="headerlink" title="添加参数的各种方式"></a>添加参数的各种方式</h2><h3 id="可执行程序"><a href="#可执行程序" class="headerlink" title="可执行程序"></a>可执行程序</h3><p>使用Command时，添加参数的方式就好像在终端中一样，直接输入即可，如下：</p>
<pre><code>robot\_description\_content = Command(
    \[
        PathJoinSubstitution(\[FindExecutable(name=&quot;xacro&quot;)\]),
        &quot; &quot;,
        PathJoinSubstitution(
            \[FindPackageShare(description\_package), &quot;urdf&quot;, description\_file\]
        ),
        &quot; &quot;,
        &quot;prefix:=&quot;,
        prefix,
        &quot; &quot;,
        &quot;use\_sim:=&quot;,
        use\_sim,
        &quot; &quot;,
        &quot;use\_fake\_hardware:=&quot;,
        use\_fake\_hardware,
        &quot; &quot;,
        &quot;fake\_sensor\_commands:=&quot;,
        fake\_sensor\_commands,
        &quot; &quot;,
        &quot;slowdown:=&quot;,
        slowdown,
    \]
)
</code></pre>
<h3 id="Node-1"><a href="#Node-1" class="headerlink" title="Node"></a>Node</h3><p>向Node添加参数有两种方式：parameters和arguments。区别在于，parameters是通过指定Node的parameters来进行的，在Node中，会有以下对parameters的声明：</p>
<p>this-&gt;declare_parameter<a href="std::string">std::string</a>(“my_parameter”, “world”);</p>
<p>此时使用方式如下：</p>
<pre><code>robot\_state\_pub\_node = Node(
    package=&quot;robot\_state\_publisher&quot;,
    executable=&quot;robot\_state\_publisher&quot;,
    output=&quot;both&quot;,
    parameters=\[robot\_description\],
)
</code></pre>
<p>而arguments则类似直接在终端中通过“-xxx”的方式指定参数。此时Node中会有对命令行参数的声明。使用方式如下：</p>
<pre><code>rviz\_node = Node(
    package=&quot;rviz2&quot;,
    executable=&quot;rviz2&quot;,
    name=&quot;rviz2&quot;,
    output=&quot;log&quot;,
    arguments=\[&quot;-d&quot;, rviz\_config\_file\],
)
</code></pre>
<p>到底要使用哪一个，实际上是和Node本身的代码相关的。因为这篇博文是说launch file的，这里就不赘述。</p>
<h3 id="Launch-2"><a href="#Launch-2" class="headerlink" title="Launch"></a>Launch</h3><p>从Launch file本身来说，需要通过DeclareLaunchArgument来声明参数：</p>
<p>from launch.actions import DeclareLaunchArgument<br>    arg_show_rviz &#x3D; DeclareLaunchArgument(<br>        “start_rviz”,<br>        default_value&#x3D;”false”,<br>        description&#x3D;”start RViz automatically with the launch file”,<br>    )</p>
<p>在使用IncludeLaunchDescription调用Launch文件的时候，需要使用函数的launch_arguments参数指定这些参数：</p>
<pre><code>base\_launch = IncludeLaunchDescription(
    PythonLaunchDescriptionSource(\[ThisLaunchFileDir(), &quot;/rrbot\_base.launch.py&quot;\]),
    launch\_arguments=&#123;
        &quot;controllers\_file&quot;: &quot;rrbot\_multi\_interface\_forward\_controllers.yaml&quot;,
        &quot;description\_file&quot;: &quot;rrbot\_system\_multi\_interface.urdf.xacro&quot;,
        &quot;prefix&quot;: prefix,
        &quot;use\_fake\_hardware&quot;: use\_fake\_hardware,
        &quot;fake\_sensor\_commands&quot;: fake\_sensor\_commands,
        &quot;slowdown&quot;: slowdown,
        &quot;robot\_controller&quot;: robot\_controller,
    &#125;.items(),
)
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/05/05/%E4%BD%BF%E7%94%A8gazebo%E5%92%8Cros2%E4%BB%BF%E7%9C%9F%E9%97%AD%E7%8E%AF%E6%9C%BA%E5%99%A8%E4%BA%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/05/%E4%BD%BF%E7%94%A8gazebo%E5%92%8Cros2%E4%BB%BF%E7%9C%9F%E9%97%AD%E7%8E%AF%E6%9C%BA%E5%99%A8%E4%BA%BA/" class="post-title-link" itemprop="url">使用Gazebo和ROS2仿真闭环机器人</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-05 23:49:28" itemprop="dateCreated datePublished" datetime="2022-05-05T23:49:28+08:00">2022-05-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/" itemprop="url" rel="index"><span itemprop="name">robotics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/Iginition/" itemprop="url" rel="index"><span itemprop="name">Iginition</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/Iginition/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>URDF的局限在于它无法表示闭环机器人：指的是结构中存在闭环的机器人。主要原因是，现在并没有有效的闭环运动学求解器，这里指的是解析解。不过SDF是支持闭环结构的，因为Gazebo支持闭环运动学求解，用的可能是一种近似算法。所以在Gazebo的帮助下，我们可以基于闭环机器人的URDF进行仿真，并在Rviz2中显示。遗憾的是Ignition尚不支持闭环结构，所以只能用Gazebo，或者用Gazebo开发组的话来说，Gazebo Classic。</p>
<p>demo：<a target="_blank" rel="noopener" href="https://gitee.com/linx981002/closed/_loop/_kinematic/_demo">https://gitee.com/linx981002/closed\_loop\_kinematic\_demo</a></p>
<p>这个项目还包括我自己绘制的一个吊车机器人，觉得有用的话，在这里留言或在gitee上给一个Star吧。</p>
<h2 id="拆环"><a href="#拆环" class="headerlink" title="拆环"></a>拆环</h2><p>获得一个闭环机器人的URDF。拆掉闭环中的一个关节，让机器人变成一个开环机器人。一般来说，闭环结构中肯定会有一个无动力的关节（有的时候可能不止一个），拆掉这个关节即可。在URDF中，则体现为删除一个joint描述。</p>
<h2 id="注入Gazebo描述"><a href="#注入Gazebo描述" class="headerlink" title="注入Gazebo描述"></a>注入Gazebo描述</h2><p>将上一步删除的joint添加上<gazebo>标签加回URDF中。这使得在我们使用gazebo_spawner通过ros topic——robot_description生成实体的时候，URDF再转换为SDF的过程中，这一块joint会被添加回生成的SDF中，从而补全闭环。如下：</p>
  <gazebo>
    <joint name="boom\_support" type="revolute">
      <child>hydraulic\_rod</child>
      <parent>main\_boom</parent> 
    </joint>
  </gazebo>

<p>需要注意的是，在这一过程中，是无法指定旋转轴心点的，轴心点默认为子link的基准点。</p>
<p>**注意：**由于Gazebo在寻找Mesh上存在一些不足，因此在URDF中的Mesh路径最好全部换成绝对路径。如果发现在Gazebo中生成的实体不可见，但是切换到Joint显示模式，能够看到关节的frame，那很可能是URDF中mesh路径的问题。</p>
<h2 id="注入gazebo-ros2-control描述，添加ros2-control配置"><a href="#注入gazebo-ros2-control描述，添加ros2-control配置" class="headerlink" title="注入gazebo_ros2_control描述，添加ros2_control配置"></a>注入gazebo_ros2_control描述，添加ros2_control配置</h2><p>目前我们只在Gazebo中生成了一个闭环的机器人，我们更希望能够用Rviz监控它的状态。因此我们使用gazebo_ros2_control来将Gazebo中机器人的状态发布到ros topic中。</p>
<p>插一句，gazebo_ros2_control的原理实际上是继承了ros2_control的hadware_interface，重写了read和write函数。一种可能的实现方式是，它不断通过Gazebo的API获取信息，然后通过write函数发布到ros的某个topic上。我么有具体看过代码，上面只是猜想。</p>
<p>在插入描述的时候，注意被删去的关节不应当加入，因为在ros中，并不存在这个关节。这个概念需要谨记，在ros中，这个机器人依然是一个开环机器人。</p>
<p>如果只是发布状态的话，只需要使用joint_state_broadcaster这个controller。</p>
<p>controller_manager:<br>  ros__parameters:<br>    update_rate: 100  # H</p>
<pre><code>joint\_state\_broadcaster:
  type: joint\_state\_broadcaster/JointStateBroadcaster
</code></pre>
<p>我使用xacro来管理这块内容。简洁起见我只列了一个关节。这里的yaml文件可以使用find，因为这一块内容只在ros中起作用，不会通过Gazebo。</p>
<?xml version="1.0"?>
<p><robot 
    xmlns:xacro="http://www.ros.org/wiki/xacro" >  </p>
<pre><code>&lt;!-- Macro for gazebo simulation and ros2\_control --&gt;
    &lt;gazebo&gt;
        &lt;plugin filename=&quot;libgazebo\_ros2\_control.so&quot; name=&quot;gazebo\_ros2\_control&quot;&gt;
            &lt;parameters&gt;$(find sany)/ros2\_control\_config/robot\_state\_publisher.yaml&lt;/parameters&gt;
        &lt;/plugin&gt;
    &lt;/gazebo&gt;

    &lt;ros2\_control name=&quot;GazeboSystem&quot; type=&quot;system&quot;&gt;
        &lt;hardware&gt;
            &lt;plugin&gt;gazebo\_ros2\_control/GazeboSystem&lt;/plugin&gt;
        &lt;/hardware&gt;
    &lt;!-- Main joints --&gt;
    &lt;joint    name=&quot;rotate\_joint&quot;    type=&quot;revolute&quot;&gt;
        &lt;command\_interface name=&quot;position&quot;&gt;
            &lt;param name=&quot;min&quot;&gt;-1&lt;/param&gt;
            &lt;param name=&quot;max&quot;&gt;1&lt;/param&gt;
        &lt;/command\_interface&gt;
        &lt;state\_interface name=&quot;position&quot;/&gt;
    &lt;/joint&gt;
    &lt;/ros2\_control&gt;
</code></pre>
</robot>

<h2 id="Launch文件"><a href="#Launch文件" class="headerlink" title="Launch文件"></a>Launch文件</h2><p>在Launch中，我们需要依次进行以下操作：</p>
<ol>
<li>发布URDF到&#x2F;robot_description topic；</li>
<li>启动Gazebo</li>
<li>在Gazebo中生成Entity</li>
<li>生成Controller</li>
</ol>
<p>一个已知问题是，如果直接在launch中启动rviz，会出现模型丢失的情况，手动启动就不会有这样的问题。具体的实现可见代码。</p>
<h2 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h2><p>懒得上传了，有人看到并感兴趣的话就留言吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/04/30/best-practice-for-ignition-%E7%95%8C%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/best-practice-for-ignition-%E7%95%8C%E9%9D%A2/" class="post-title-link" itemprop="url">Best practice for Ignition: 界面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-30 18:10:12" itemprop="dateCreated datePublished" datetime="2022-04-30T18:10:12+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/" itemprop="url" rel="index"><span itemprop="name">robotics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/Iginition/" itemprop="url" rel="index"><span itemprop="name">Iginition</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我一度感觉Gazebo要生生地被它的开发组玩坏了，现在的Ignition更像是UE、Unity那样的游戏引擎，基本上是物理引擎+光照引擎，同时集成了一些和ROS的互动。所有的功能都以插件的形式呈现。</p>
<p>在Ignition Gazebo的插件中能找到许多官方的插件，其中有一个插件角Shutdown Button，是的，就是显示一个关闭按钮，点一下可以关闭窗口。这有什么意义？？更不要提各种奔溃和不稳定了。总之现在的Ignition Gazebo完全让人不知道该如何去使用它，甚至都没有一个官方教程告诉用户怎么去使用它。</p>
<p>使用Ignition的人少之又少。这里我就介绍一下如何使用Ignition，满足正常的仿真需求。</p>
<h1 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h1><p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-1024x568.png"></a></p>
<p>Ignition Gazebo的界面，左边为模拟界面，右边为工具栏。为了正常使用，优先开启Resource Spawner插件，这样就不用傻兮兮地在sdf文件中手动加模型了，直接拖拽即可。这样至少达到了Gazebo的使用要求。左上角为基础功能，添加一些基本性质、光照和基本变换，就像UE等游戏引擎那样。左下角为开启模拟功能。总体来看，你可以把它当做一个乞丐版的游戏引擎。</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p>插件是Ignition Gazebo的“创新之处”，为了全面了解其功能，以下列出所有插件的功能：</p>
<h2 id="默认打开或建议打开的插件功能"><a href="#默认打开或建议打开的插件功能" class="headerlink" title="默认打开或建议打开的插件功能"></a>默认打开或建议打开的插件功能</h2><h3 id="Scene-3D"><a href="#Scene-3D" class="headerlink" title="Scene 3D"></a>Scene 3D</h3><p>左边的3D显示区域。</p>
<h3 id="Component-inspector"><a href="#Component-inspector" class="headerlink" title="Component inspector"></a>Component inspector</h3><p>这会显示所选模型的各类属性。例如名称、自碰撞属性、位姿、Wind Mode（不清楚是什么）、模型路径、父对象、是否静态等。</p>
<p>大部分属性都是不能更改的，除了位姿。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-3.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-3-1024x675.png"></a></p>
<h3 id="Copy-Paste"><a href="#Copy-Paste" class="headerlink" title="Copy&#x2F;Paste"></a>Copy&#x2F;Paste</h3><p>粘贴复制功能，这个插件默认开启，放置在左上角。</p>
<h3 id="Entity-Context-Menu"><a href="#Entity-Context-Menu" class="headerlink" title="Entity Context Menu"></a>Entity Context Menu</h3><p>这个插件也是默认开启的，开启后，在3D界面中右键点击实体，可以进行一些快捷操作，比如查看碰撞、关节，跟随、转到等等。</p>
<h3 id="Select-Entity"><a href="#Select-Entity" class="headerlink" title="Select Entity"></a>Select Entity</h3><p>没想到吧，连选择一个Entity都是通过插件实现的功能。</p>
<h3 id="Entity-Tree"><a href="#Entity-Tree" class="headerlink" title="Entity Tree"></a>Entity Tree</h3><p>显示实体树，非常实用且重要的功能，推荐默认开启。</p>
<h3 id="Grid-3D"><a href="#Grid-3D" class="headerlink" title="Grid 3D"></a>Grid 3D</h3><p>默认开启，显示网格坐标。</p>
<h3 id="Transform-control"><a href="#Transform-control" class="headerlink" title="Transform control"></a>Transform control</h3><p>基础变换功能，默认开启，显示在左上角。</p>
<h3 id="World-control"><a href="#World-control" class="headerlink" title="World control"></a>World control</h3><p>开启和终止仿真，默认打开，放在左下角。</p>
<h3 id="Scene-Manager"><a href="#Scene-Manager" class="headerlink" title="Scene Manager"></a>Scene Manager</h3><p>默认打开的功能，应该是用于组织维护仿真数据库。</p>
<h3 id="Resource-Spawner"><a href="#Resource-Spawner" class="headerlink" title="Resource Spawner"></a>Resource Spawner</h3><p>这功能就厉害了，可以导入本地的模型和Fuel中的模型。建议默认打开。但是链接Fuel服务器要花很长时间，而且没有搜索功能，只有点进模型贡献者的分类页面，才能按照名称搜索。openrobotics有很多的资源，可以取需(下载的模型太大会卡死…)。之后可能单开一篇讲讲怎么用Resource spawner。</p>
<h3 id="Screenshot"><a href="#Screenshot" class="headerlink" title="Screenshot"></a>Screenshot</h3><p>截屏功能，默认在左上角。</p>
<h3 id="Interactive-View-Control"><a href="#Interactive-View-Control" class="headerlink" title="Interactive View Control"></a>Interactive View Control</h3><p>应该是视角拖拽一类的功能。</p>
<h3 id="Shapes"><a href="#Shapes" class="headerlink" title="Shapes"></a>Shapes</h3><p>放置基础形状，有立方体、球体、圆柱、胶囊体、扁球体五种。默认在左上角。</p>
<h3 id="Spawn"><a href="#Spawn" class="headerlink" title="Spawn"></a>Spawn</h3><p>直接写插件描述：Adding spawn functionality to the 3D scene, via events and drag and drop.</p>
<h3 id="Lights"><a href="#Lights" class="headerlink" title="Lights"></a>Lights</h3><p>放置灯光。</p>
<h3 id="Visualization-capabilities"><a href="#Visualization-capabilities" class="headerlink" title="Visualization capabilities"></a>Visualization capabilities</h3><p>提供查看模型关节、布线、碰撞的功能。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-10.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-10-1024x492.png"></a></p>
<h3 id="World-stats"><a href="#World-stats" class="headerlink" title="World stats"></a>World stats</h3><p>显示仿真时间与真实时间之间的比例。默认显示在3D视图的右下角。</p>
<h2 id="显示类插件功能"><a href="#显示类插件功能" class="headerlink" title="显示类插件功能"></a>显示类插件功能</h2><h3 id="Visualize-contacts"><a href="#Visualize-contacts" class="headerlink" title="Visualize contacts"></a>Visualize contacts</h3><p>会显示模型之间的碰撞点。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-2.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-2-1024x675.png"></a></p>
<h3 id="Topic-echo"><a href="#Topic-echo" class="headerlink" title="Topic echo"></a>Topic echo</h3><p>读取指定话题的信息，这里读取的是ign内部的topic。</p>
<h3 id="Image-display"><a href="#Image-display" class="headerlink" title="Image display"></a>Image display</h3><p>如果有照相机传感器的话，可以在这里看到图像。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-6.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-6-1024x577.png"></a></p>
<h3 id="Topic-Viewer"><a href="#Topic-Viewer" class="headerlink" title="Topic Viewer"></a>Topic Viewer</h3><p>可以看到各类Topic，以及Topic数据的格式。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-9.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-9-1024x577.png"></a></p>
<h3 id="Transport-plotting"><a href="#Transport-plotting" class="headerlink" title="Transport plotting"></a>Transport plotting</h3><p>这看起来是一个可以绘制图表的插件，但是不知道如何指定绘制对象。从名字中我认为应该是 可以绘制时间序列的一些数据。</p>
<h3 id="Video-Recoder"><a href="#Video-Recoder" class="headerlink" title="Video Recoder"></a>Video Recoder</h3><p>内置的录屏功能。这个倒是没有默认放在左上角，我倒觉得也可以默认放在左上角。</p>
<h3 id="Navigation-satellite-map"><a href="#Navigation-satellite-map" class="headerlink" title="Navigation satellite map"></a>Navigation satellite map</h3><p>需要一个有Navsat信息的ignition topic，可以显示地图。</p>
<h3 id="Visualize-lidar"><a href="#Visualize-lidar" class="headerlink" title="Visualize lidar"></a>Visualize lidar</h3><p>可以可视化显示激光雷达的激光线，并且标出有扫描到实体的线。</p>
<h3 id="Plotting"><a href="#Plotting" class="headerlink" title="Plotting"></a>Plotting</h3><p>看起来，类似Transport plotting，或者说这两者应该是一致的。需要配合Topic viewer使用，Topic中可以绘图的数据将可以被拖拽到绘图窗口中，自动地绘制一条与时间相关的数据。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-11.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-11-1024x555.png"></a></p>
<h2 id="没有卵用的插件功能"><a href="#没有卵用的插件功能" class="headerlink" title="没有卵用的插件功能"></a>没有卵用的插件功能</h2><h3 id="Banana-for-scale"><a href="#Banana-for-scale" class="headerlink" title="Banana for scale"></a>Banana for scale</h3><p>可以插入两个香蕉模型，一个大(1m)一个小。不知所谓的功能。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-1.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-1-1024x539.png"></a></p>
<h3 id="Shutdown-Button"><a href="#Shutdown-Button" class="headerlink" title="Shutdown Button"></a>Shutdown Button</h3><p>提供一个 关闭窗口的按钮，和最右上角那个功能一样。我只能理解是开发组人的小消遣了，非常奇葩的功能。“嘿，我给我的电脑写了一个关机程序，只需要打开它然后按一下这个按钮就可以关机了，神奇吧？”</p>
<h2 id="输入、交互、修改类功能"><a href="#输入、交互、修改类功能" class="headerlink" title="输入、交互、修改类功能"></a>输入、交互、修改类功能</h2><h3 id="Component-inspector-editor"><a href="#Component-inspector-editor" class="headerlink" title="Component inspector editor"></a>Component inspector editor</h3><p>打开它经常会让ignition奔溃退出。它和Component inspector的区别在于提供了一个“add link or light to the model”的选项，通过这个选项，可以向模型添加更多的子link，然后在上面添加传感器等。</p>
<p>使用它经常会导致奔溃。</p>
<h3 id="Publisher"><a href="#Publisher" class="headerlink" title="Publisher"></a>Publisher</h3><p>向特定话题以一定频率发布消息，用于测试。</p>
<h3 id="Tape-measure"><a href="#Tape-measure" class="headerlink" title="Tape measure"></a>Tape measure</h3><p>可以通过点击两点测量一段距离，一般在俯视图下会比较准确，其他时候准确度堪忧。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-4.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-4-1024x555.png"></a></p>
<h3 id="Grid-config"><a href="#Grid-config" class="headerlink" title="Grid config"></a>Grid config</h3><p>可以调整网格的属性，例如大小、数量、颜色。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-5.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-5-1024x555.png"></a></p>
<h3 id="View-Angle"><a href="#View-Angle" class="headerlink" title="View Angle"></a>View Angle</h3><p>可以用这个插件快捷地调整到某一正视图，同时可以选择正交视角还是透视视角，正交视角的视角移动方式非常奇怪，也许是BUG。</p>
<h3 id="Joint-position-controller"><a href="#Joint-position-controller" class="headerlink" title="Joint position controller"></a>Joint position controller</h3><p>可以控制有活动关节的模型。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-7.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-7-1024x577.png"></a></p>
<h3 id="Teleop"><a href="#Teleop" class="headerlink" title="Teleop"></a>Teleop</h3><p>可以用于控制小车。提供数值控制、键盘控制、滚动条控制三种控制方法。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-8.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-8-1024x577.png"></a></p>
<h3 id="Align-tool"><a href="#Align-tool" class="headerlink" title="Align tool"></a>Align tool</h3><p>对其工具，和gazebo classic中的对齐工具类似。也许是配合前面的编辑修改器使用的，从而能在Ignition中建造机器人模型。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-12.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/04/%E5%9B%BE%E7%89%87-12-1024x555.png"></a></p>
<h2 id="未知的功能"><a href="#未知的功能" class="headerlink" title="未知的功能"></a>未知的功能</h2><h3 id="Camera-tracking"><a href="#Camera-tracking" class="headerlink" title="Camera tracking"></a>Camera tracking</h3><p>未知功能，只显示空白。</p>
<h3 id="Transport-scene-manager"><a href="#Transport-scene-manager" class="headerlink" title="Transport scene manager"></a>Transport scene manager</h3><p>这也是一个会经常导致奔溃的插件。它的作用不明，大部分情况下它只是保持空白，或者突然导致Ignition gazebo的奔溃。</p>
<h3 id="Gz-scene-3D"><a href="#Gz-scene-3D" class="headerlink" title="Gz scene 3D"></a>Gz scene 3D</h3><p>又是一个，找不到任何功能描述，一打开就奔溃的插件。</p>
<h3 id="Key-publisher"><a href="#Key-publisher" class="headerlink" title="Key publisher"></a>Key publisher</h3><p>不明。</p>
<h3 id="Minimal-Scene"><a href="#Minimal-Scene" class="headerlink" title="Minimal Scene"></a>Minimal Scene</h3><p>我一打开这个插件，ignition gazebo就被橄榄了。报错如下：</p>
<p>[GUI] [Err] [RenderEngineManager.cc:470] Failed to load plugin [] : couldn’t load library on path [&#x2F;usr&#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;].<br>[GUI] [Err] [MinimalScene.cc:525] Engine [] is not supported<br>[GUI] [Err] [MinimalScene.cc:666] Unable to initialize renderer</p>
<h3 id="Marker-Manager"><a href="#Marker-Manager" class="headerlink" title="Marker Manager"></a>Marker Manager</h3><p>空描述，这种我一致认为是默认开启的基础功能。</p>
<h3 id="3D-Plot"><a href="#3D-Plot" class="headerlink" title="3D Plot"></a>3D Plot</h3><p>意义不明。</p>
<h3 id="Playback-Scrubber"><a href="#Playback-Scrubber" class="headerlink" title="Playback Scrubber"></a>Playback Scrubber</h3><p>意义不明，可能是可以看回放的插件，但是没搞懂是怎么运作的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/03/25/cp210x%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/25/cp210x%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" class="post-title-link" itemprop="url">CP210x无法识别问题解决</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-25 18:41:16" itemprop="dateCreated datePublished" datetime="2022-03-25T18:41:16+08:00">2022-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bolgs/" itemprop="url" rel="index"><span itemprop="name">bolgs</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bolgs/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/embedded/" itemprop="url" rel="index"><span itemprop="name">embedded</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/embedded/ESP32/" itemprop="url" rel="index"><span itemprop="name">ESP32</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>淘宝买了一个ESP32开发板，但是插电后无法识别。一度以为是电缆问题，换了一根电缆，换了linux都无法识别。最后发现，是CP2104芯片VID&#x2F;PID的问题。这块开发板由于是国外一个叫TTGO的牌子生产的，可能对CP2104芯片有改动，因为最后安装好后显示的VID&#x2F;PID不是原厂的。下面给出windows和linux的解决方法：</p>
<h2 id="windows下解决方法"><a href="#windows下解决方法" class="headerlink" title="windows下解决方法"></a>windows下解决方法</h2><p>首先查看设备的VID&#x2F;PID值：</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/%E5%9B%BE%E7%89%87.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/%E5%9B%BE%E7%89%87-897x1024.png"></a></p>
<p>然后下载AN220套件：<a target="_blank" rel="noopener" href="https://www.silabs.com/documents/public/application-notes/an220-usb-driver-customization.pdf?msclkid=622ae635ac2511ec8e57b7c9b32974c9">https://www.silabs.com/documents/public/application-notes/an220-usb-driver-customization.pdf?msclkid=622ae635ac2511ec8e57b7c9b32974c9</a></p>
<p>使用AN220套件生成一个包含自定义VID&#x2F;PID的驱动，参见教程：<a target="_blank" rel="noopener" href="https://whycan.com/t/_2469.html">https://whycan.com/t\_2469.html</a></p>
<p>在windows下安装这个驱动要关闭强制驱动签名检查，参见教程：<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/624e74594dbc8d34e8ba5aa6.html">https://jingyan.baidu.com/article/624e74594dbc8d34e8ba5aa6.html</a></p>
<p>安装驱动后即可识别CP210x芯片。之后可以通过其他工具比如CP210xSetIDs.exe修改芯片的VID&#x2F;PID到原厂设置，用AN220中的USBXpress Device Customization Utility (AN721)工具应该也可以，但是我购买的ESP32开发板不让修改，不知道什么情况。工具是官方免费提供的，不少人拿到CSDN上骗积分，<strong>只能说CSDN nmsl，中文互联网生态真的是烂到骨子里了</strong>。在中文互联网上找教程无异于屎里淘金。</p>
<p>官方下载页面：<a target="_blank" rel="noopener" href="https://community.silabs.com/s/article/cp210x-legacy-programming-utilities?language=en%5C_US&msclkid=23f2b0e7ac2611ecacc5f53ef9b2a838">https://community.silabs.com/s/article/cp210x-legacy-programming-utilities?language=en\_US&amp;msclkid=23f2b0e7ac2611ecacc5f53ef9b2a838</a></p>
<h2 id="Linux下解决方法"><a href="#Linux下解决方法" class="headerlink" title="Linux下解决方法"></a>Linux下解决方法</h2><p>可以直接参考：<a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/67936/attaching-usb-serial-device-with-custom-pid-to-ttyusb0-on-embedded?msclkid=58035a75ac2211ec92c1307bad2e8c2e">https://unix.stackexchange.com/questions/67936/attaching-usb-serial-device-with-custom-pid-to-ttyusb0-on-embedded?msclkid=58035a75ac2211ec92c1307bad2e8c2e</a></p>
<p>最后一个回答直接针对CP210x。考虑到可能有时候上不去stackoverflow，把回答贴在下面：</p>
<p>absolutely similar situation has happened with the eval board from SiLabs - the USB-UART chip CP2102 being provided with irregular VID&#x2F;PID:</p>
<p><code>lsusb</code></p>
<p><code>Bus 001 Device 002: ID 10c4:804c Cygnal Integrated Products, Inc.</code></p>
<p>problem solved by loading module cp210x and sending VID&#x2F;PID as mentioned before:</p>
<p><code>sudo modprobe cp210x</code></p>
<p><code>sudo -s</code></p>
<p><code>echo 10c4 804c &gt; /sys/bus/usb-serial/drivers/cp210x/new_id</code></p>
<h2 id="知乎关于CSDN的回答"><a href="#知乎关于CSDN的回答" class="headerlink" title="知乎关于CSDN的回答"></a>知乎关于CSDN的回答</h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/52061495">https://www.zhihu.com/question/52061495</a></p>
<p>其实天下乌鸦一般黑，CSDN也算是中文互联网里针对程序员做的最好的知识分享网站了，悲哉。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/03/17/moveit2%E5%A4%A7%E8%B5%B7%E5%BA%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/17/moveit2%E5%A4%A7%E8%B5%B7%E5%BA%95/" class="post-title-link" itemprop="url">Moveit2架构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-17 16:54:24" itemprop="dateCreated datePublished" datetime="2022-03-17T16:54:24+08:00">2022-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/" itemprop="url" rel="index"><span itemprop="name">robotics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/Moveit/" itemprop="url" rel="index"><span itemprop="name">Moveit</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/Moveit/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很久没更新了，因为最近都在打老头环。这次来更新一下，Moveit2的架构。</p>
<p>Moveit2是适配ROS2的运动规划包。重要性无需多言。这一篇主要讲的是Moveit2都做了些什么。</p>
<h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/image.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/image-1024x312.png"></a></p>
<p>此流程中列出的都是Moveit2默认的求解器或算法。由于Moveit2是开源的，这些求解器和算法也都是开源的。</p>
<h2 id="Moveit2的接口"><a href="#Moveit2的接口" class="headerlink" title="Moveit2的接口"></a>Moveit2的接口</h2><p>Moveit2的核心是move_group，实际上是一个ROS Node。这个Node提供了用户与Moveit2交互的接口，以及场景数据储存。</p>
<h3 id="交互接口"><a href="#交互接口" class="headerlink" title="交互接口"></a>交互接口</h3><p>Moveit2提供C++接口和Rviz可视化GUI接口。Python暂时不支持（大失败）</p>
<h2 id="规划场景"><a href="#规划场景" class="headerlink" title="规划场景"></a>规划场景</h2><p>规划路径前要获得场景数据，例如人用手摘书上的苹果的时候，要知道手、苹果、数分别在哪里。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/image-1.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/image-1-1024x804.png"></a></p>
<p>场景数据储存在ros topic中，可以分为三类：</p>
<ol>
<li>State Monitor：机器人的状态，以及与机器人附着的物体。</li>
<li>Scene Monitor：静态的场景信息，一般提前输入。</li>
<li>World Geometry Monitor，动态的场景信息，通过传感器获得。</li>
</ol>
<p>其中，前两者主要通过Mesh表示。动态的场景信息通过Occupancy Map表示，依赖于Octomap库，支持点云和深度图像。</p>
<h2 id="碰撞检测"><a href="#碰撞检测" class="headerlink" title="碰撞检测"></a>碰撞检测</h2><p>碰撞检测默认使用FCL(Flexible Collision Library) 库，本质上任务比较简单。然而，碰撞检测可能会非常耗时，有时候会占用路径中90%的计算量。为了避免这个情况，有两个方法：</p>
<ul>
<li>简化碰撞模型。可视化模型可以非常精美，但是碰撞模型可以简化。例如使用Bounding Box替代碰撞模型（最极端的情况），或者使用低模。</li>
<li>使用ACM（Allowed collision matrix）。在使用moveit_assistance的时候，有一项就是生成ACM，ACM会指出在检查碰撞时忽略哪两个link之间，比如机械臂上两个永远不会相碰的link或者两个永远会接触的link。</li>
</ul>
<h2 id="Motion-planning：全局规划"><a href="#Motion-planning：全局规划" class="headerlink" title="Motion planning：全局规划"></a>Motion planning：全局规划</h2><p>路径规划用于规划出一条末端执行器从当前位置到最终位置的路线，注意这里在规划的时候并不考虑整个机器人，仅考虑执行器的碰撞。</p>
<p>Moveit2支持多个路径规划库，默认的是OMPL，一个开源的规划算法库。其他的库也可以关注一下，一般来说OMPL就可以满足需求：</p>
<ul>
<li>Pilz, 工业运动规划器，生成圆周运动和线性运动的轨迹</li>
<li>STOMP, 基于优化的规划期</li>
<li>SBPL, 基于搜索</li>
<li>CHOMP, 基于梯度优化</li>
</ul>
<h3 id="几种常见的路径规划算法"><a href="#几种常见的路径规划算法" class="headerlink" title="几种常见的路径规划算法"></a>几种常见的路径规划算法</h3><p>以下是OMPL包含的部分算法，完整的列表在这里：<a target="_blank" rel="noopener" href="https://ompl.kavrakilab.org/planners.html">https://ompl.kavrakilab.org/planners.html</a></p>
<ul>
<li>多次查询规划器<ul>
<li>PRM : 先随机采样，构建无碰撞的无向图，然后使用A*搜索路径</li>
<li>无向图可以复用<ul>
<li>变体：LazyPRM，PRM*，LazyPRM*</li>
</ul>
</li>
</ul>
</li>
<li>单次查询规划器<ul>
<li>RRT，EST，FMT等<ul>
<li>变体：双向RRT，LBTRRT，稀疏RRT，等等</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>默认的路劲优化是寻找最短路径，但是也可以指定其他的优化目标，比如路径间隙、路径数量等等。这些优化目标可以在C++接口中设置。（不保证能达到最优）</p>
<h2 id="局部规划与IK"><a href="#局部规划与IK" class="headerlink" title="局部规划与IK"></a>局部规划与IK</h2><p>局部规划（location plan）基于全局规划的路径，计算当前机器人状态下应当给出何种命令使得机器人向目标移动并避免碰撞。在此过程中，需要使用IK（Inverse Kinematics）。</p>
<h3 id="Kinematics"><a href="#Kinematics" class="headerlink" title="Kinematics"></a>Kinematics</h3><p>运动学的解释如下：the branch of mechanics concerned with the motion of objects without reference to the forces which cause the motion.Compare with <a target="_blank" rel="noopener" href="https://cn.bing.com/search?q=define+dynamics">dynamics</a>.</p>
<p>Moveit2支持的逆运动学求解器包括：</p>
<ul>
<li><strong>KDL Kinematics</strong>，默认的求解器<ul>
<li>数值解</li>
<li>速度慢，可能找不到解</li>
</ul>
</li>
<li><strong>TRAC-IK</strong><ul>
<li>同时运行两个 IK 实现**，**一种是对 KDL 基于牛顿的收敛算法的简单扩展，第二种是 SQP（顺序二次规划）非线性优化方法</li>
<li>优于KDL，moveit2内置</li>
</ul>
</li>
<li><strong>IKFAST</strong><ul>
<li>经测试，效果最好，但是安装比较繁琐，可能不支持Moveit2</li>
</ul>
</li>
</ul>
<h3 id="局部规划"><a href="#局部规划" class="headerlink" title="局部规划"></a>局部规划</h3><p>局部规划试图在全局规划给出的两个相邻路径点之间进行规划。主要任务：</p>
<ul>
<li>Processes incoming global trajectory updates 参考全局规划轨迹点</li>
<li>Solves the local planning problem based on robot state, world and reference trajectory 根据机器人当前状态计算局部规划问题</li>
<li>Sends position&#x2F;velocity commands to the robot driver 发送命令给机器人</li>
</ul>
<p>下表是一个全局规划和局部规划的对比：</p>
<p><strong>Global Planner</strong></p>
<p><strong>Local Planner</strong></p>
<p>•Solve global solution trajectory<br>•Optimize trajectory path (continuously)</p>
<p>•Follow global reference trajectory<br>•Solve local problem constraints<br>•May process sensor input<br>•Optimize solution locally<br>•Compute controller commands</p>
<p>•Complete<br>•No restricted  computation time<br>•Not real-time safe<br>•Not necessarily deterministic</p>
<p>•Can get stuck in local minima<br>•Low computation time<br>•Realtime-safe (depends on solver) •Deterministic</p>
<p>•OMPL planner<br>•STOMP<br>•TrajOpt<br>•Cartesian motion planner<br>•Pilz Industrial Motion Planner<br>•MTC</p>
<p>•IK solver, Jacobian<br>•Potential field planner<br>•Trajectory optimization algorithm<br>•Model Predictive Control (MPC)<br>•Sensor-based Optimal Control</p>
<p>局部规划器不仅能输出具体的关节命令，还可以根据用户设定的逻辑唤起事件。例如，在靠近障碍物的时候停止运行，然后重新规划，如下图。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/image-5.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/image-5-1024x732.png"></a></p>
<p>结合全局规划和局部规划后，实际上就涉及到任务的时间序列，在下一章混合规划将会描述。</p>
<h2 id="混合规划"><a href="#混合规划" class="headerlink" title="混合规划"></a>混合规划</h2><p>混合规划实际上就是全局规划+局部规划。基于混合规划可以实现在运动过程中持续优化全局路径，或者用于方案修复（例如在碰撞时停止并重新规划路径），以及自适应运动（例如贴合凹凸不平的物体表面进行运动，焊接机器人）</p>
<p>对于混合规划，其组成如下图所示。1-5表示了一个最基础的请求是如何促使信息流在各组件内流动的（不包括重新规划的过程）</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/image-3.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/image-3-1024x541.png"></a></p>
<h3 id="重新规划：以动态障碍物避障为例"><a href="#重新规划：以动态障碍物避障为例" class="headerlink" title="重新规划：以动态障碍物避障为例"></a>重新规划：以动态障碍物避障为例</h3><p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/03/image-8.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/03/image-8-1024x370.png"></a></p>
<p>上图非常清楚。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上就是在moveit2中进行路径规划的主要组件和流程。下一篇会介绍moveit2的配置方法。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wonderful-sea-04900b000.6.azurestaticapps.net/2022/02/22/msa%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9moveit2%E7%9A%84%E9%80%82%E9%85%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiao Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn Lin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/22/msa%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9moveit2%E7%9A%84%E9%80%82%E9%85%8D/" class="post-title-link" itemprop="url">MSA使用以及对moveit2的适配</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-22 23:08:46" itemprop="dateCreated datePublished" datetime="2022-02-22T23:08:46+08:00">2022-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-27 15:52:33" itemprop="dateModified" datetime="2025-03-27T15:52:33+08:00">2025-03-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/" itemprop="url" rel="index"><span itemprop="name">robotics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/robotics/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>moveit2还没有完成对MSA的迁移，最近的信息是2021年8月份，我看到moveit团队还在讨论msa的迁移问题，预计是要对msa进行一次重构。</p>
<p>在此之前，要在moveit2下使用msa还得花些功夫，需要我们通过msa导出机器人信息后再对launch文件进行修改。因为moveit2的教程用的是pandas机械臂，因此我们可以对比一下moveit2 tutorial里的moveit config和msa直接导出的moveit config有什么区别。</p>
<h2 id="MSA使用"><a href="#MSA使用" class="headerlink" title="MSA使用"></a>MSA使用</h2><p>使用moveit就需要moveit config，msa可以自动生成moveit config。此外msa还可以生成许多用于调试的launch文件。MSA目前只支持ROS1，所以我们在noetic下演示这个过程。</p>
<p>roslaunch moveit_setup_assistant setup_assistant.launch</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-1.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-1-1024x604.png"></a></p>
<p>我们首先要准备自己的urdf文件，不支持xacro。这里我们使用和moveit2 toturial中一样的pandas arm。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-2.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-2-1024x604.png"></a></p>
<h3 id="自碰撞矩阵"><a href="#自碰撞矩阵" class="headerlink" title="自碰撞矩阵"></a>自碰撞矩阵</h3><p>碰撞矩阵用来表示哪些关节在运行中是不可能碰撞的，这样就不用在逆运动学结算中去考虑它们了，可以节省计算资源。实现的方法是拖动上面的滑条，拖到最大时，会随机采样10000个位姿，在这些位姿中都不曾碰撞的关节就被认为是不可能相撞的（非常的暴力）</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-3.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-3-1024x604.png"></a></p>
<h3 id="Virtual-Joints虚拟关节"><a href="#Virtual-Joints虚拟关节" class="headerlink" title="Virtual Joints虚拟关节"></a>Virtual Joints虚拟关节</h3><p>虚拟关节用于创造机器人与世界中其他坐标系之间的链接。虚拟关节只支持三种类型，fixed，planar，float，实际上就对应机器人固定、机器人可以在平面上移动和机器人可以在空间中6个自由度上运动，比如无人机。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-4.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-4-1024x604.png"></a></p>
<h3 id="Planning-Groups"><a href="#Planning-Groups" class="headerlink" title="Planning Groups"></a>Planning Groups</h3><p>在这里我们可以设置控制组。举个例子，对于机械臂本体以及其末端执行器，他们的职责是不同的，机械臂负责把末端执行器送到指定位置，末端执行器负责执行其他操作。对于机械臂本体，当然是要进行逆运动学结算等操作的， 末端执行器执行的操作就花样百出了。我们先来设置panda_arm：</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-5.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-5-1024x636.png"></a></p>
<p>Kinematic Solver就是逆运动学求解器，kdl求解器相对来说属于是moveit2默认的求解方式。OMPL则是防碰撞算法，这里可以先不设置，其他的保留原设置即可。完成后点击add_joints，将此控制组涉及到的关节都选中。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-6.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-6-1024x636.png"></a></p>
<p>对于hand部分也进行类似的操作。注意到解释中说，如果选择的是link而不是joint，那么其parent joint也会被加入。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-7.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-7-1024x636.png"></a></p>
<h3 id="Robot-Poses"><a href="#Robot-Poses" class="headerlink" title="Robot Poses"></a>Robot Poses</h3><p>这是最好理解的设置，也就是预先设计几个位姿，方便快速归位或者调试。这是一个检查你的URDF对关节限位设置是否正确的最好时机。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-9.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-9-1024x636.png"></a></p>
<h3 id="End-Effectors"><a href="#End-Effectors" class="headerlink" title="End Effectors"></a>End Effectors</h3><p>这个页面用于设置末端执行器，我没有太明白这个设置的用处。设置也很简单。</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-10.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-10-1024x636.png"></a></p>
<h3 id="Passive-Joints"><a href="#Passive-Joints" class="headerlink" title="Passive Joints"></a>Passive Joints</h3><p>在被动关节中被选中的任何关节都不会被moveit2再控制，哪怕它之前被归为一个控制组。被动关节指那些没有动力的关节。由于pandas么有被动关节，所以跳过。</p>
<h3 id="Controllers"><a href="#Controllers" class="headerlink" title="Controllers"></a>Controllers</h3><p>这是moveit和ros_control交互的重要设置界面。点击Add controller之后，选择<strong>position_controllers&#x2F;JointPositionController</strong>作为控制器类型。然后选择Add Group， 把panda_arm加入。</p>
<h3 id="3D-Perception"><a href="#3D-Perception" class="headerlink" title="3D Perception"></a>3D Perception</h3><p>这个设置页面用于设置3D感知相关的内容，先跳过；</p>
<h3 id="Simulation"><a href="#Simulation" class="headerlink" title="Simulation"></a>Simulation</h3><p>这个页面不是用于设置的，不过可以快速生成一个可以用于gazebo模拟的SDF文件。</p>
<h3 id="Author-Information"><a href="#Author-Information" class="headerlink" title="Author Information"></a>Author Information</h3><p>作者信息设置，不多说。</p>
<h3 id="Configuration-File"><a href="#Configuration-File" class="headerlink" title="Configuration File"></a>Configuration File</h3><p>这里我们可以看到MSA都生成了哪些文件，他们都有什么用。msa是这样组织launch文件的：许多launch文件只负责启动一个功能，用户可以根据自己的需要进行选择。demo.launch则是最主要的launch文件。我们catkin build之后launch这个文件就可以使用它了。最后我们要将其导出为一个包，根据ROS的命名规范，将包命名为项目名_moveit_config。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>导出完成后，使用catkin build建立项目，然后roslaunch panda_moveit_config demo.launch，不需要做其他任何改动：</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-12.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-12-1024x705.png"></a></p>
<p>出现以上界面，并且可以正常plan-execute，则说明导出正确。</p>
<h2 id="MSA导出文件适配moveit2"><a href="#MSA导出文件适配moveit2" class="headerlink" title="MSA导出文件适配moveit2"></a>MSA导出文件适配moveit2</h2><h3 id="moveit和moveit2中的panda-arm对比"><a href="#moveit和moveit2中的panda-arm对比" class="headerlink" title="moveit和moveit2中的panda_arm对比"></a>moveit和moveit2中的panda_arm对比</h3><p>从moveit2的教程中我们可以启动一样的panda_arm：</p>
<p>ros2 launch moveit2_tutorials demo.launch.py</p>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-13.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-13-1024x572.png"></a></p>
<p>下面我们来查看moveit2中，一样的导出的demo.launch.py文件都涉及到哪些文件。以下文件被导入:</p>
<ul>
<li><strong>robot_description_config</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;panda.urdf.xacro</li>
<li><strong>robot_description_semantic_config</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;panda.srdf</li>
<li><strong>kinematics_yaml</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;kinematics.yaml</li>
<li><strong>ompl_planning_yaml</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;ompl_planning.yaml</li>
<li><strong>moveit_simple_controllers_yaml</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;panda_controllers.yaml</li>
<li><strong>ros2_controllers_path</strong>: moveit_resources_panda_moveit_config&#x2F;config&#x2F;panda_ros_controllers.yaml</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://www.lxshaw.com/wp-content/uploads/2022/02/image-14.png"><img src="http://www.lxshaw.com/wp-content/uploads/2022/02/image-14-1024x613.png"></a></p>
<p>在我们之前导出的config中间，除了xacro以外，都有对应的文件。其中，kinematcis_yaml、srdf文件是不需要修改的；<strong>ompl_planning_yaml</strong>需要修改为以下形式：</p>
<p>planner_configs:<br>  AnytimePathShortening:<br>    type: geometric::AnytimePathShortening<br>    shortcut: true  # Attempt to shortcut all new solution paths<br>    hybridize: true  # Compute hybrid solution trajectories<br>    max_hybrid_paths: 24  # Number of hybrid paths generated per iteration<br>    num_planners: 4  # The number of default planners to use for planning<br>    planners: “”  # A comma-separated list of planner types (e.g., “PRM,EST,RRTConnect”Optionally, planner parameters can be passed to change the default:”PRM[max_nearest_neighbors&#x3D;5],EST[goal_bias&#x3D;.5],RRT[range&#x3D;10. goal_bias&#x3D;.1]“<br>  SBL:<br>    type: geometric::SBL<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>  EST:<br>    type: geometric::EST<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0 setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05<br>  LBKPIECE:<br>    type: geometric::LBKPIECE<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    border_fraction: 0.9  # Fraction of time focused on boarder default: 0.9<br>    min_valid_path_fraction: 0.5  # Accept partially valid moves above fraction. default: 0.5<br>  BKPIECE:<br>    type: geometric::BKPIECE<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    border_fraction: 0.9  # Fraction of time focused on boarder default: 0.9<br>    failed_expansion_score_factor: 0.5  # When extending motion fails, scale score by factor. default: 0.5<br>    min_valid_path_fraction: 0.5  # Accept partially valid moves above fraction. default: 0.5<br>  KPIECE:<br>    type: geometric::KPIECE<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05<br>    border_fraction: 0.9  # Fraction of time focused on boarder default: 0.9 (0.0,1.]<br>    failed_expansion_score_factor: 0.5  # When extending motion fails, scale score by factor. default: 0.5<br>    min_valid_path_fraction: 0.5  # Accept partially valid moves above fraction. default: 0.5<br>  RRT:<br>    type: geometric::RRT<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability? default: 0.05<br>  RRTConnect:<br>    type: geometric::RRTConnect<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>  RRTstar:<br>    type: geometric::RRTstar<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability? default: 0.05<br>    delay_collision_checking: 1  # Stop collision checking as soon as C-free parent found. default 1<br>  TRRT:<br>    type: geometric::TRRT<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability? default: 0.05<br>    max_states_failed: 10  # when to start increasing temp. default: 10<br>    temp_change_factor: 2.0  # how much to increase or decrease temp. default: 2.0<br>    min_temperature: 10e-10  # lower limit of temp change. default: 10e-10<br>    init_temperature: 10e-6  # initial temperature. default: 10e-6<br>    frountier_threshold: 0.0  # dist new state to nearest neighbor to disqualify as frontier. default: 0.0 set in setup()<br>    frountierNodeRatio: 0.1  # 1&#x2F;10, or 1 nonfrontier for every 10 frontier. default: 0.1<br>    k_constant: 0.0  # value used to normalize expresssion. default: 0.0 set in setup()<br>  PRM:<br>    type: geometric::PRM<br>    max_nearest_neighbors: 10  # use k nearest neighbors. default: 10<br>  PRMstar:<br>    type: geometric::PRMstar<br>  FMT:<br>    type: geometric::FMT<br>    num_samples: 1000  # number of states that the planner should sample. default: 1000<br>    radius_multiplier: 1.1  # multiplier used for the nearest neighbors search radius. default: 1.1<br>    nearest_k: 1  # use Knearest strategy. default: 1<br>    cache_cc: 1  # use collision checking cache. default: 1<br>    heuristics: 0  # activate cost to go heuristics. default: 0<br>    extended_fmt: 1  # activate the extended FMT*: adding new samples if planner does not finish successfully. default: 1<br>  BFMT:<br>    type: geometric::BFMT<br>    num_samples: 1000  # number of states that the planner should sample. default: 1000<br>    radius_multiplier: 1.0  # multiplier used for the nearest neighbors search radius. default: 1.0<br>    nearest_k: 1  # use the Knearest strategy. default: 1<br>    balanced: 0  # exploration strategy: balanced true expands one tree every iteration. False will select the tree with lowest maximum cost to go. default: 1<br>    optimality: 1  # termination strategy: optimality true finishes when the best possible path is found. Otherwise, the algorithm will finish when the first feasible path is found. default: 1<br>    heuristics: 1  # activates cost to go heuristics. default: 1<br>    cache_cc: 1  # use the collision checking cache. default: 1<br>    extended_fmt: 1  # Activates the extended FMT*: adding new samples if planner does not finish successfully. default: 1<br>  PDST:<br>    type: geometric::PDST<br>  STRIDE:<br>    type: geometric::STRIDE<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05<br>    use_projected_distance: 0  # whether nearest neighbors are computed based on distances in a projection of the state rather distances in the state space itself. default: 0<br>    degree: 16  # desired degree of a node in the Geometric Near-neightbor Access Tree (GNAT). default: 16<br>    max_degree: 18  # max degree of a node in the GNAT. default: 12<br>    min_degree: 12  # min degree of a node in the GNAT. default: 12<br>    max_pts_per_leaf: 6  # max points per leaf in the GNAT. default: 6<br>    estimated_dimension: 0.0  # estimated dimension of the free space. default: 0.0<br>    min_valid_path_fraction: 0.2  # Accept partially valid moves above fraction. default: 0.2<br>  BiTRRT:<br>    type: geometric::BiTRRT<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    temp_change_factor: 0.1  # how much to increase or decrease temp. default: 0.1<br>    init_temperature: 100  # initial temperature. default: 100<br>    frountier_threshold: 0.0  # dist new state to nearest neighbor to disqualify as frontier. default: 0.0 set in setup()<br>    frountier_node_ratio: 0.1  # 1&#x2F;10, or 1 nonfrontier for every 10 frontier. default: 0.1<br>    cost_threshold: 1e300  # the cost threshold. Any motion cost that is not better will not be expanded. default: inf<br>  LBTRRT:<br>    type: geometric::LBTRRT<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05<br>    epsilon: 0.4  # optimality approximation factor. default: 0.4<br>  BiEST:<br>    type: geometric::BiEST<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>  ProjEST:<br>    type: geometric::ProjEST<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05<br>  LazyPRM:<br>    type: geometric::LazyPRM<br>    range: 0.0  # Max motion added to tree. &#x3D;&#x3D;&gt; maxDistance_ default: 0.0, if 0.0, set on setup()<br>  LazyPRMstar:<br>    type: geometric::LazyPRMstar<br>  SPARS:<br>    type: geometric::SPARS<br>    stretch_factor: 3.0  # roadmap spanner stretch factor. multiplicative upper bound on path quality. It does not make sense to make this parameter more than 3. default: 3.0<br>    sparse_delta_fraction: 0.25  # delta fraction for connection distance. This value represents the visibility range of sparse samples. default: 0.25<br>    dense_delta_fraction: 0.001  # delta fraction for interface detection. default: 0.001<br>    max_failures: 1000  # maximum consecutive failure limit. default: 1000<br>  SPARStwo:<br>    type: geometric::SPARStwo<br>    stretch_factor: 3.0  # roadmap spanner stretch factor. multiplicative upper bound on path quality. It does not make sense to make this parameter more than 3. default: 3.0<br>    sparse_delta_fraction: 0.25  # delta fraction for connection distance. This value represents the visibility range of sparse samples. default: 0.25<br>    dense_delta_fraction: 0.001  # delta fraction for interface detection. default: 0.001<br>    max_failures: 5000  # maximum consecutive failure limit. default: 5000<br>arm:<br>  planner_configs:<br>    - AnytimePathShortening<br>    - SBL<br>    - EST<br>    - LBKPIECE<br>    - BKPIECE<br>    - KPIECE<br>    - RRT<br>    - RRTConnect<br>    - RRTstar<br>    - TRRT<br>    - PRM<br>    - PRMstar<br>    - FMT<br>    - BFMT<br>    - PDST<br>    - STRIDE<br>    - BiTRRT<br>    - LBTRRT<br>    - BiEST<br>    - ProjEST<br>    - LazyPRM<br>    - LazyPRMstar<br>    - SPARS<br>    - SPARStwo</p>
<p>ros_controllers和simple_moveit_controllers.yaml里的controller_names要对应起来，其中simple_moveit_controllers.yaml最简单的情况下只包括一个position_trajectory_controller。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Xiao Lin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">162</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/linxiaoshaw@foxmail.com" title="E-Mail → linxiaoshaw@foxmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiao Lin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
